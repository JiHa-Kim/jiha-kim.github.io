{%- comment -%}
  note-card.html
  Expects these locals:
    - note: the note document object
{%- endcomment -%}
<article class="card-wrapper card">
  <a href="{{ note.url | relative_url }}" class="post-preview row g-0 flex-md-row-reverse">
    {% assign card_body_col = '12' %}

    {%- if note.image -%}
      {% assign src = note.image.path | default: note.image %}
      {% unless src contains '//' %}
        {% assign src = note.media_subpath | append: '/' | append: src | replace: '//', '/' %}
      {% endunless %}
      <div class="col-md-5">
        <img src="{{ src }}" alt="{{ note.image.alt | default: 'Preview Image' }}">
      </div>
      {% assign card_body_col = '7' %}
    {%- endif -%}

    <div class="col-md-{{ card_body_col }}">
      <div class="card-body d-flex flex-column">
        <span class="badge rounded-pill bg-info text-uppercase mb-1">Note</span>

        <h1 class="card-title my-2 mt-md-0">{{ note.title }}</h1>

        <div class="card-text content mt-0 mb-3">
          <p>
            {{ note.description | default: note.excerpt | strip_html | truncate: 160 }}
          </p>
        </div>

        <div class="post-meta flex-grow-1 d-flex align-items-end">
          <div class="me-auto">
            <i class="far fa-calendar fa-fw me-1"></i>
            {% include datetime.html date=note.date lang=lang %}

            {% if note.categories.size > 0 %}
              <i class="far fa-folder-open fa-fw ms-3 me-1"></i>
              <span class="categories">
                {% for category in note.categories %}
                  {{ category -}}
                  {%- unless forloop.last %},{% endunless %}
                {% endfor %}
              </span>
            {% endif %}
          </div>
        </div>
        <!-- .post-meta -->
      </div>
      <!-- .card-body -->
    </div>
    <!-- .col -->
  </a>
</article>
