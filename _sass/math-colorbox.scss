@charset "utf-8";

/* ----------------------------------------------------------- */
/* Generic mix-in                                              */
/* ----------------------------------------------------------- */
@mixin math-colorbox(
  $border,
  $accent,
  $bg,
  $icon,
  $default-title: null,
  $fa-style: 'solid'
) {
  border-left   : 0.25rem solid $border;
  border-radius : 0.25rem;
  background    : $bg;
  margin        : 1rem 0;
  padding       : 0.6rem 1rem;
  position      : relative;
  color         : var(--text-color);
  box-shadow    : var(--language-border-color) 1px 1px 2px 1px;

  .title {
    background      : $bg;
    color           : $accent;
    font-weight     : 600;
    display         : flex;
    align-items     : center;
    gap             : 0.75rem;
    padding         : 0.55rem 1rem;
    margin          : -0.6rem -1rem 0.6rem -1rem;
    border-bottom   : 1px solid rgba($accent, 0.15);
    line-height     : 1.15;

    > p { margin: 0; }

    &::before {
      content               : $icon;
      font                  : var(--fa-font-#{$fa-style});
      line-height           : 1;
      text-rendering        : auto;
      -webkit-font-smoothing: antialiased;
    }
  }

  @if $default-title {
    &:not(:has(> .title)) {
      padding-top: 2rem;

      &::before {
        content      : $icon;
        font         : var(--fa-font-#{$fa-style});
        position     : absolute;
        top          : 0.7rem;
        left         : 1rem;
        color        : $accent;
        line-height  : 1;
      }
      &::after {
        content      : $default-title;
        font-weight  : 600;
        position     : absolute;
        top          : 0.7rem;
        left         : 2.5rem;
        color        : $accent;
      }
    }
  }

  > p:first-child { margin-top:    0; }
  > p:last-child  { margin-bottom: 0; }
}

/* ----------------------------------------------------------- */
/* Concrete variants                                           */
/* ----------------------------------------------------------- */
.box-definition  { @include math-colorbox(#2563eb, #2563eb, rgba(#2563eb, 0.08), '\f02e', 'Definition'); }
.box-lemma       { @include math-colorbox(#16a34a, #16a34a, rgba(#16a34a, 0.08), '\f022', 'Lemma'); }
.box-proposition { @include math-colorbox(#eab308, #eab308, rgba(#eab308, 0.08), '\f0eb', 'Proposition'); }
.box-theorem     { @include math-colorbox(#dc2626, #dc2626, rgba(#dc2626, 0.08), '\f091', 'Theorem'); }
.box-example     { @include math-colorbox(#8b5cf6, #8b5cf6, rgba(#8b5cf6, 0.08), '\f0eb', 'Example'); }

/* ----------------------------------------------------------- */
/* Dark-mode overrides (prefers-color-scheme: dark)            */
/* — only border & text changed; background kept at α = 0.08   */
/* ----------------------------------------------------------- */
@media (prefers-color-scheme: dark) {

  /* Definition: border/icon brighter, bg α=0.08 like before */
  .box-definition {
    @include math-colorbox(
      #1e40af,                // darker border
      #60a5fa,                // brighter accent
      rgba(#2563eb, 0.08),    // ← original subtle tint
      '\f02e',
      'Definition'
    );
  }

  /* Theorem: same bg α=0.08 */
  .box-theorem {
    @include math-colorbox(
      #991b1b,                // deeper border
      #f87171,                // lighter accent
      rgba(#dc2626, 0.08),    // ← reverted tint
      '\f091',
      'Theorem'
    );
  }

  /* Example: same bg α=0.08 */
  .box-example {
    @include math-colorbox(
      #6d28d9,                // richer border
      #a78bfa,                // brighter accent
      rgba(#8b5cf6, 0.08),    // ← reverted tint
      '\f0eb',
      'Example'
    );
  }
}
