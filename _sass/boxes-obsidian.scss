/* ===========================================================================
 * Obsidian-like Callouts for Jekyll Chirpy
 * =========================================================================== */
@use 'boxes' as bx;

/* Helper for Collapsible Math/Obsidian boxes */
@mixin details-math(
  $border,
  $accent,
  $bg,
  $icon-closed,
  $label,
  $icon-open: $icon-closed
) {
  @include bx.details-box($border, $accent, $bg, $icon-closed, $icon-open);

  > summary {
    /* Inject label only if we have a wrapper (prevents overwriting plain text) */
    > *:first-child::before {
      content: '#{$label}. ';
      margin-right: 0.35em;
      opacity: 0.95;
    }
  }
}

/* --------------------------------------------------------------------------
 * A. Math / Academic Family
 * -------------------------------------------------------------------------- */

/* Static Definitions */
.box-proof:not(details) {
  @include bx.math-box(#9a9a9a, #9a9a9a, rgba(#9a9a9a, 0.06), '\f14a', 'Proof');
  .title {
    font-style: italic;
    > *:first-child::before {
      font-style: normal;
      font-weight: 700;
    }
  }
}
.box-solution:not(details) {
  @include bx.math-box(
    #46aa46,
    #46aa46,
    rgba(#46aa46, 0.08),
    '\f0eb',
    'Solution'
  );
  margin-top: 0.3rem;
}
.box-corollary:not(details) {
  @include bx.math-box(
    #3c78d7,
    #3c78d7,
    rgba(#3c78d7, 0.08),
    '\f126',
    'Corollary'
  );
}
.box-remark:not(details) {
  @include bx.math-box(
    #7a7a7a,
    #7a7a7a,
    rgba(#7a7a7a, 0.06),
    '\f4ad',
    'Remark'
  );
  border-left-style: dashed;
}
.box-principle:not(details) {
  @include bx.math-box(
    #6496be,
    #6496be,
    rgba(#6496be, 0.08),
    '\f24e',
    'Principle'
  );
}
.box-axiom:not(details) {
  @include bx.math-box(#a064be, #a064be, rgba(#a064be, 0.08), '\f13a', 'Axiom');
  .title > * {
    font-style: italic;
  }
}
.box-postulate:not(details) {
  @include bx.math-box(
    #a064be,
    #a064be,
    rgba(#a064be, 0.08),
    '\f13a',
    'Postulate'
  );
  .title > * {
    font-style: italic;
  }
}
.box-conjecture:not(details) {
  @include bx.math-box(
    #d26464,
    #d26464,
    rgba(#d26464, 0.08),
    '\f059',
    'Conjecture'
  );
  border-left-style: dashed;
}
.box-claim:not(details) {
  @include bx.math-box(#787878, #787878, rgba(#787878, 0.04), '\f08d', 'Claim');
}
.box-notation:not(details) {
  @include bx.math-box(
    #b4b4b4,
    #b4b4b4,
    rgba(#b4b4b4, 0.06),
    '\f68b',
    'Notation'
  );
}
.box-algorithm:not(details) {
  @include bx.math-box(
    #50b4a0,
    #50b4a0,
    rgba(#50b4a0, 0.08),
    '\f542',
    'Algorithm'
  );
}
.box-problem:not(details) {
  @include bx.math-box(
    #f08232,
    #f08232,
    rgba(#f08232, 0.08),
    '\f044',
    'Problem'
  );
}
.box-exercise:not(details) {
  @include bx.math-box(
    #f08232,
    #f08232,
    rgba(#f08232, 0.08),
    '\f044',
    'Exercise'
  );
}
.box-assumption:not(details) {
  @include bx.math-box(
    #c8c8c8,
    #c8c8c8,
    rgba(#c8c8c8, 0.06),
    '\f05a',
    'Assumption'
  );
  border-left-style: dotted;
}
.box-convention:not(details) {
  @include bx.math-box(
    #c8c8c8,
    #c8c8c8,
    rgba(#c8c8c8, 0.06),
    '\f05a',
    'Convention'
  );
  border-left-style: dotted;
}
.box-fact:not(details) {
  @include bx.math-box(#c8c8c8, #c8c8c8, rgba(#c8c8c8, 0.06), '\f129', 'Fact');
  border-left-style: dotted;
}

/* Collapsible Definitions (Details) */
details.box-proof {
  @include details-math(
    #9a9a9a,
    #9a9a9a,
    rgba(#9a9a9a, 0.06),
    '\f14a',
    'Proof'
  );
}
details.box-solution {
  @include details-math(
    #46aa46,
    #46aa46,
    rgba(#46aa46, 0.08),
    '\f0eb',
    'Solution'
  );
}
details.box-theorem {
  @include details-math(
    #dc2626,
    #dc2626,
    rgba(#dc2626, 0.08),
    '\f091',
    'Theorem'
  );
}
details.box-proposition {
  @include details-math(
    #eab308,
    #eab308,
    rgba(#eab308, 0.08),
    '\f0eb',
    'Proposition'
  );
}
details.box-lemma {
  @include details-math(
    #16a34a,
    #16a34a,
    rgba(#16a34a, 0.08),
    '\f022',
    'Lemma'
  );
}
details.box-corollary {
  @include details-math(
    #3c78d7,
    #3c78d7,
    rgba(#3c78d7, 0.08),
    '\f126',
    'Corollary'
  );
}
details.box-example {
  @include details-math(
    #8b5cf6,
    #8b5cf6,
    rgba(#8b5cf6, 0.08),
    '\f0eb',
    'Example'
  );
}
details.box-remark {
  @include details-math(
    #7a7a7a,
    #7a7a7a,
    rgba(#7a7a7a, 0.06),
    '\f4ad',
    'Remark'
  );
  border-left-style: dashed;
}
details.box-principle {
  @include details-math(
    #6496be,
    #6496be,
    rgba(#6496be, 0.08),
    '\f24e',
    'Principle'
  );
}
details.box-axiom {
  @include details-math(
    #a064be,
    #a064be,
    rgba(#a064be, 0.08),
    '\f13a',
    'Axiom'
  );
}
details.box-postulate {
  @include details-math(
    #a064be,
    #a064be,
    rgba(#a064be, 0.08),
    '\f13a',
    'Postulate'
  );
}
details.box-conjecture {
  @include details-math(
    #d26464,
    #d26464,
    rgba(#d26464, 0.08),
    '\f059',
    'Conjecture'
  );
  border-left-style: dashed;
}
details.box-claim {
  @include details-math(
    #787878,
    #787878,
    rgba(#787878, 0.04),
    '\f08d',
    'Claim'
  );
}
details.box-notation {
  @include details-math(
    #b4b4b4,
    #b4b4b4,
    rgba(#b4b4b4, 0.06),
    '\f68b',
    'Notation'
  );
}
details.box-algorithm {
  @include details-math(
    #50b4a0,
    #50b4a0,
    rgba(#50b4a0, 0.08),
    '\f542',
    'Algorithm'
  );
}
details.box-problem {
  @include details-math(
    #f08232,
    #f08232,
    rgba(#f08232, 0.08),
    '\f044',
    'Problem'
  );
}
details.box-exercise {
  @include details-math(
    #f08232,
    #f08232,
    rgba(#f08232, 0.08),
    '\f044',
    'Exercise'
  );
}
details.box-assumption {
  @include details-math(
    #c8c8c8,
    #c8c8c8,
    rgba(#c8c8c8, 0.06),
    '\f05a',
    'Assumption'
  );
  border-left-style: dotted;
}
details.box-convention {
  @include details-math(
    #c8c8c8,
    #c8c8c8,
    rgba(#c8c8c8, 0.06),
    '\f05a',
    'Convention'
  );
  border-left-style: dotted;
}
details.box-fact {
  @include details-math(#c8c8c8, #c8c8c8, rgba(#c8c8c8, 0.06), '\f129', 'Fact');
  border-left-style: dotted;
}

/* Obsidian Aliases */
.box-abstract:not(details),
.box-summary:not(details),
.box-tldr:not(details) {
  @include bx.standard-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    '\f0ae',
    var(--prompt-info-bg)
  );
}
details.box-abstract,
details.box-summary,
details.box-tldr {
  @include bx.details-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    var(--prompt-info-bg),
    '\f0ae'
  );
}

.box-todo:not(details) {
  @include bx.standard-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    '\f046',
    var(--prompt-info-bg)
  );
}
details.box-todo {
  @include bx.details-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    var(--prompt-info-bg),
    '\f046'
  );
}

.box-success:not(details),
.box-check:not(details),
.box-done:not(details) {
  @include bx.standard-box(
    var(--prompt-tip-icon),
    var(--prompt-tip-icon),
    '\f00c',
    var(--prompt-tip-bg)
  );
}
details.box-success,
details.box-check,
details.box-done {
  @include bx.details-box(
    var(--prompt-tip-icon),
    var(--prompt-tip-icon),
    var(--prompt-tip-bg),
    '\f00c'
  );
}

.box-question:not(details),
.box-help:not(details),
.box-faq:not(details) {
  @include bx.standard-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    '\f059',
    var(--prompt-info-bg)
  );
}
details.box-question,
details.box-help,
details.box-faq {
  @include bx.details-box(
    var(--prompt-info-icon),
    var(--prompt-info-icon),
    var(--prompt-info-bg),
    '\f059'
  );
}

.box-quote:not(details),
.box-cite:not(details) {
  @include bx.standard-box(
    var(--prompt-gray-icon),
    var(--prompt-gray-icon),
    '\f10d',
    var(--prompt-gray-bg)
  );
}
details.box-quote,
details.box-cite {
  @include bx.details-box(
    var(--prompt-gray-icon),
    var(--prompt-gray-icon),
    var(--prompt-gray-bg),
    '\f10d'
  );
}

.box-bug:not(details) {
  @include bx.standard-box(
    var(--prompt-danger-icon),
    var(--prompt-danger-icon),
    '\f188',
    var(--prompt-danger-bg)
  );
}
details.box-bug {
  @include bx.details-box(
    var(--prompt-danger-icon),
    var(--prompt-danger-icon),
    var(--prompt-danger-bg),
    '\f188'
  );
}

/* Simple Aliases */
.box-note {
  @extend .box-info;
}
.box-hint,
.box-important {
  @extend .box-tip;
}
.box-caution,
.box-attention {
  @extend .box-warning;
}
.box-failure,
.box-fail,
.box-missing,
.box-error {
  @extend .box-danger;
}

/* Dark Theme Overrides */
@media (prefers-color-scheme: dark) {
  /* Static Updates */
  .box-corollary:not(details) {
    @include bx.math-box(
      #224d8e,
      #8ab4ff,
      rgba(#3c78d7, 0.1),
      '\f126',
      'Corollary'
    );
  }
  .box-remark:not(details) {
    @include bx.math-box(
      #525252,
      #cfcfcf,
      rgba(#7a7a7a, 0.08),
      '\f4ad',
      'Remark'
    );
  }
  .box-proof:not(details) {
    @include bx.math-box(
      #5f5f5f,
      #d1d5db,
      rgba(#9a9a9a, 0.08),
      '\f14a',
      'Proof'
    );
  }
  .box-principle:not(details) {
    @include bx.math-box(
      #3d617f,
      #9ac3e3,
      rgba(#6496be, 0.1),
      '\f24e',
      'Principle'
    );
  }
  .box-axiom:not(details) {
    @include bx.math-box(
      #6b3e86,
      #d8b4fe,
      rgba(#a064be, 0.1),
      '\f13a',
      'Axiom'
    );
  }
  .box-postulate:not(details) {
    @include bx.math-box(
      #6b3e86,
      #d8b4fe,
      rgba(#a064be, 0.1),
      '\f13a',
      'Postulate'
    );
  }
  .box-conjecture:not(details) {
    @include bx.math-box(
      #7a2a2a,
      #fca5a5,
      rgba(#d26464, 0.1),
      '\f059',
      'Conjecture'
    );
  }
  .box-claim:not(details) {
    @include bx.math-box(
      #4b4b4b,
      #e5e7eb,
      rgba(#787878, 0.08),
      '\f08d',
      'Claim'
    );
  }
  .box-notation:not(details) {
    @include bx.math-box(
      #727272,
      #e5e7eb,
      rgba(#b4b4b4, 0.08),
      '\f68b',
      'Notation'
    );
  }
  .box-algorithm:not(details) {
    @include bx.math-box(
      #2e6e63,
      #9ae6d6,
      rgba(#50b4a0, 0.1),
      '\f542',
      'Algorithm'
    );
  }
  .box-problem:not(details) {
    @include bx.math-box(
      #92400e,
      #fdba74,
      rgba(#f08232, 0.1),
      '\f044',
      'Problem'
    );
  }
  .box-exercise:not(details) {
    @include bx.math-box(
      #92400e,
      #fdba74,
      rgba(#f08232, 0.1),
      '\f044',
      'Exercise'
    );
  }
  .box-solution:not(details) {
    @include bx.math-box(
      #166534,
      #86efac,
      rgba(#46aa46, 0.1),
      '\f0eb',
      'Solution'
    );
  }
  .box-assumption:not(details) {
    @include bx.math-box(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f05a',
      'Assumption'
    );
  }
  .box-convention:not(details) {
    @include bx.math-box(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f05a',
      'Convention'
    );
  }
  .box-fact:not(details) {
    @include bx.math-box(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f129',
      'Fact'
    );
  }

  /* Details Updates */
  details.box-theorem {
    @include details-math(
      #991b1b,
      #f87171,
      rgba(#dc2626, 0.08),
      '\f091',
      'Theorem'
    );
  }
  details.box-proposition {
    @include details-math(
      #a16207,
      #fbbf24,
      rgba(#eab308, 0.08),
      '\f0eb',
      'Proposition'
    );
  }
  details.box-lemma {
    @include details-math(
      #15803d,
      #4ade80,
      rgba(#16a34a, 0.08),
      '\f022',
      'Lemma'
    );
  }
  details.box-example {
    @include details-math(
      #6d28d9,
      #a78bfa,
      rgba(#7d48f8, 0.08),
      '\f0eb',
      'Example'
    );
  }
  details.box-corollary {
    @include details-math(
      #224d8e,
      #8ab4ff,
      rgba(#3c78d7, 0.1),
      '\f126',
      'Corollary'
    );
  }
  details.box-remark {
    @include details-math(
      #525252,
      #cfcfcf,
      rgba(#7a7a7a, 0.08),
      '\f4ad',
      'Remark'
    );
  }
  details.box-proof {
    @include details-math(
      #5f5f5f,
      #d1d5db,
      rgba(#9a9a9a, 0.08),
      '\f14a',
      'Proof'
    );
  }
  details.box-principle {
    @include details-math(
      #3d617f,
      #9ac3e3,
      rgba(#6496be, 0.1),
      '\f24e',
      'Principle'
    );
  }
  details.box-axiom {
    @include details-math(
      #6b3e86,
      #d8b4fe,
      rgba(#a064be, 0.1),
      '\f13a',
      'Axiom'
    );
  }
  details.box-postulate {
    @include details-math(
      #6b3e86,
      #d8b4fe,
      rgba(#a064be, 0.1),
      '\f13a',
      'Postulate'
    );
  }
  details.box-conjecture {
    @include details-math(
      #7a2a2a,
      #fca5a5,
      rgba(#d26464, 0.1),
      '\f059',
      'Conjecture'
    );
  }
  details.box-claim {
    @include details-math(
      #4b4b4b,
      #e5e7eb,
      rgba(#787878, 0.08),
      '\f08d',
      'Claim'
    );
  }
  details.box-notation {
    @include details-math(
      #727272,
      #e5e7eb,
      rgba(#b4b4b4, 0.08),
      '\f68b',
      'Notation'
    );
  }
  details.box-algorithm {
    @include details-math(
      #2e6e63,
      #9ae6d6,
      rgba(#50b4a0, 0.1),
      '\f542',
      'Algorithm'
    );
  }
  details.box-problem {
    @include details-math(
      #92400e,
      #fdba74,
      rgba(#f08232, 0.1),
      '\f044',
      'Problem'
    );
  }
  details.box-exercise {
    @include details-math(
      #92400e,
      #fdba74,
      rgba(#f08232, 0.1),
      '\f044',
      'Exercise'
    );
  }
  details.box-solution {
    @include details-math(
      #166534,
      #86efac,
      rgba(#46aa46, 0.1),
      '\f0eb',
      'Solution'
    );
  }
  details.box-assumption {
    @include details-math(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f05a',
      'Assumption'
    );
  }
  details.box-convention {
    @include details-math(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f05a',
      'Convention'
    );
  }
  details.box-fact {
    @include details-math(
      #5f5f5f,
      #e5e7eb,
      rgba(#c8c8c8, 0.08),
      '\f129',
      'Fact'
    );
  }
}
