Find:
(?:([^\r\n])(\r?\n)(\s*\$\$))|(?:(\s*\$\$\s*)(\r?\n)(?!\r?\n|\s*\$\$)([^\r\n\s]))
Replace:
$2$3\n$4$6\n$7$8